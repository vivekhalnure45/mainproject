<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SpeedPark - Forget Password</title>
    <link rel="stylesheet" type="text/css" href="forget_password.css" />
  </head>
  <body>
    <div class="body2">
      <h2>Forget Password</h2>
      <span>Enter email to get reset-password email</span>
      <form action="">
        <label for="">Email</label>
        <input
          type="email"
          id="forget_password_email"
          placeholder="Enter registered email"
          required
        />
        <button type="submit" id="forget_password_submit">Send Email</button>
        <div class="signIn-link">
          Remembered Password?
          <a href="/register_login.html">login</a>
        </div>
      </form>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import {
        getAuth,
        sendPasswordResetEmail,
      } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    //   vivke kaka's - firebase
    const firebaseConfig = {
    apiKey: "AIzaSyAlE-47ICJy-WBoia8cZZKMXu77j_uLwz0",
    authDomain: "vehicleparking-2605a.firebaseapp.com",
    projectId: "vehicleparking-2605a",
    storageBucket: "vehicleparking-2605a.appspot.com",
    messagingSenderId: "851913236223",
    appId: "1:851913236223:web:3ca5e5aa91b6e4a75db6ca",
    measurementId: "G-VYK9JHCKCQ"
  };


      // GD - firebase
        // const firebaseConfig = {
        //   apiKey: "AIzaSyCUYGT9X4QNU860AqiTmke923lZj2EDltI",
        //   authDomain: "speedparking-proj.firebaseapp.com",
        //   projectId: "speedparking-proj",
        //   storageBucket: "speedparking-proj.appspot.com",
        //   messagingSenderId: "104625690574",
        //   appId: "1:104625690574:web:4cb5ea3b46b7a504bafd9f",
        //   measurementId: "G-YD2VPL7NRY",
        // };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      const forget_password = async (e) => {
        const email = document.getElementById("forget_password_email").value;

        e.preventDefault();

        sendPasswordResetEmail(auth, email)
          .then((data) => {
            console.log(data);
            alert("Check your gmail");
            window.location.href = "/register_login.html";
          })
          .catch((err) => {
            alert("Something went wrong: " + err.code);
          });
      };
      document
        .getElementById("forget_password_submit")
        .addEventListener("click", function (event) {
          forget_password(event);
        });
    </script>
  </body>
</html>
